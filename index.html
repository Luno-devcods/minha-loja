<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="description" content="Catálogo com meus produtos recomendados como afiliado." />
<title>Minha Loja de Recomendações</title>
<style>
  :root{--bg:#f7f7f7;--card:#fff;--accent:#111;--muted:#666;--btn-bg:#000;--btn-color:#fff;}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:var(--accent);background:var(--bg);-webkit-font-smoothing:antialiased}
  .wrap{max-width:1100px;margin:28px auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  header .brand{display:flex;gap:12px;align-items:center}
  .logo {width:48px;height:48px;border-radius:8px;background:#222;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}
  h1{font-size:20px;margin:0}
  p.lead{margin:0;color:var(--muted);font-size:14px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:20px}
  @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:520px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:10px;padding:12px;box-shadow:0 6px 20px rgba(11,11,11,0.05);display:flex;flex-direction:column;gap:8px;min-height:260px}
  .img{height:150px;background:#eee;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .img img{max-width:100%;max-height:100%;object-fit:contain}
  .title{font-weight:700;font-size:14px;margin:0}
  .price{color:#1a1a1a;font-weight:700}
  .meta{font-size:13px;color:var(--muted);margin-top:4px}
  .one-liner{font-size:13px;color:var(--muted);min-height:30px;margin-top:6px}
  .btn-row{margin-top:auto;display:flex;gap:8px;align-items:center;justify-content:space-between}
  .btn{background:var(--btn-bg);color:var(--btn-color);padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:700;display:inline-block}
  .badge{font-size:12px;color:#fff;background:#ff7a18;padding:4px 8px;border-radius:999px}
  .platform{font-size:12px;color:var(--muted);background:#f0f0f0;padding:4px 8px;border-radius:6px}
  footer{margin-top:26px;padding:12px;border-radius:8px;background:#fff;color:var(--muted);font-size:13px}
  .notice{font-size:13px;color:var(--muted)}
  .controls{display:flex;gap:8px;align-items:center}
  .search{padding:8px;border-radius:8px;border:1px solid #e6e6e6}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">OT</div>
      <div>
        <h1>Minhas Recomendações — Loja (Afiliado)</h1>
        <p class="lead">Produtos testados, recomendados e agrupados. Clique em "Saiba mais" para ver preço e comprar.</p>
      </div>
    </div>
    <div class="controls">
      <input id="q" class="search" placeholder="Pesquisar produto..." />
      <select id="filter" class="search">
        <option value="">Todas plataformas</option>
      </select>
    </div>
  </header>

  <main id="grid" class="grid" aria-live="polite"></main>

  <footer>
    <div class="notice">
      Sou afiliado — posso receber comissão se você comprar. Não altera preço para você. Links abrem no Mercado Livre, Temu ou AliExpress.
    </div>
    <div style="margin-top:8px;color:var(--muted)">Dica: para aumentar conversão, mantenha imagens limpas e descrições curtas.</div>
  </footer>
</div>

<script>
/* === SEUS 3 PRODUTOS === */
const products = [
  {
    id: "vipal-tr300-909021",
    title: "Vipal Trail TR300 90/90-21",
    price: "R$ 308,25",
    platform: "Mercado Livre",
    image: "https://http2.mlstatic.com/D_NQ_NP_2X_935233-MLA82937594220_032025-F.webp",
    one_liner: "Pneu dianteiro XRE300 90/90-21",
    affiliate_url: "https://mercadolivre.com/sec/2bBAxMu"
  },
  {
    id: "capacete-fw3-gt5-gt2",
    title: "Capacete Fechado Fw3 Gt 5 Gt2 Viseira Cristal Com Narigueira",
    price: "R$ 329,90",
    platform: "Mercado Livre",
    image: "https://http2.mlstatic.com/D_NQ_NP_2X_766669-MLB92290236868_092025-F-capacete-fechado-fw3-gt-5-gt2-viseira-cristal-com-narigueira.webp",
    one_liner: "Capacete confortável durante longo período de uso",
    affiliate_url: "https://mercadolivre.com/sec/2ZFJiJy"
  },
  {
    id: "capacete-taurus-zarref-v4",
    title: "Capacete Taurus Zarref V4 Escamoteável Retrátil Robocop — Tamanho 60",
    price: "R$ 238,00",
    platform: "Mercado Livre",
    image: "https://http2.mlstatic.com/D_NQ_NP_2X_687877-MLA92324055427_092025-F.webp",
    one_liner: "Capacete muito versátil e confortável para uso constante",
    affiliate_url: "https://mercadolivre.com/sec/2rPSuKV"
  }
];

/* ====== RENDERIZAÇÃO ====== */
function escapeHtml(s){ return (s||'').replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
function buildCard(p){
  const div = document.createElement('article');
  div.className = 'card';
  div.innerHTML = `
    <div class="img"><img src="${p.image}" alt="${escapeHtml(p.title)}" /></div>
    <div>
      <div class="title">${escapeHtml(p.title)}</div>
      <div class="meta"><span class="price">${escapeHtml(p.price)}</span> · <span class="platform">${escapeHtml(p.platform)}</span></div>
      <div class="one-liner">${escapeHtml(p.one_liner || '')}</div>
    </div>
    <div class="btn-row">
      <a class="btn" href="${p.affiliate_url}" target="_blank" rel="sponsored nofollow noopener noreferrer">SAIBA MAIS</a>
      <div class="badge">Ver</div>
    </div>
  `;
  return div;
}
function render(list){
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  if(!list.length){ grid.innerHTML = '<div style="grid-column:1/-1;padding:18px;color:var(--muted)">Nenhum produto encontrado.</div>'; return; }
  list.forEach(p=> grid.appendChild(buildCard(p)));
}
render(products);

/* populate filter */
const filter = document.getElementById('filter');
const cats = Array.from(new Set(products.map(p=>p.platform))).sort();
cats.forEach(c=>{
  const o = document.createElement('option'); o.value=c; o.textContent=c; filter.appendChild(o);
});

/* search & filter */
document.getElementById('q').addEventListener('input', applyFilters);
filter.addEventListener('change', applyFilters);
function applyFilters(){
  const q = document.getElementById('q').value.toLowerCase().trim();
  const f = filter.value;
  const out = products.filter(p=>{
    const matchQ = !q || (p.title + ' ' + (p.one_liner||'')).toLowerCase().includes(q);
    const matchF = !f || p.platform === f;
    return matchQ && matchF;
  });
  render(out);
}

/* adiciona UTM automática */
function ensureUtm(url, source='catalog'){
  try{
    const u = new URL(url);
    if(!u.searchParams.has('utm_source')) u.searchParams.set('utm_source', source);
    if(!u.searchParams.has('utm_medium')) u.searchParams.set('utm_medium', 'affiliate');
    return u.toString();
  }catch(e){ return url; }
}
products.forEach(p => p.affiliate_url = ensureUtm(p.affiliate_url, 'minha_loja_afiliado'));
</script>
</body>
</html>
